---
title: Is
description: 類型檢查工具
---

`is` 模組提供了一系列類型守衛（type guards）函數，用於在執行時檢查值的類型。

## 安裝

```bash
npm install @chiastack/utils
```

## 導入

```typescript
import {
  isNumber,
  isPositiveNumber,
  isNegativeNumber,
  isString,
  isURL,
  isUrl,
  isURLInstance,
  isAbortError,
} from '@chiastack/utils/is';
```

## API

### `isNumber`

檢查值是否為數字。

```typescript
isNumber(value: unknown): value is number
```

**範例：**

```typescript
import { isNumber } from '@chiastack/utils/is';

if (isNumber(value)) {
  // TypeScript 知道 value 是 number 類型
  console.log(value + 1);
}
```

### `isPositiveNumber`

檢查值是否為正數。

```typescript
isPositiveNumber(value: unknown): value is number
```

**範例：**

```typescript
import { isPositiveNumber } from '@chiastack/utils/is';

if (isPositiveNumber(value)) {
  // value 是正數
  console.log(Math.sqrt(value));
}
```

### `isNegativeNumber`

檢查值是否為負數。

```typescript
isNegativeNumber(value: unknown): value is number
```

**範例：**

```typescript
import { isNegativeNumber } from '@chiastack/utils/is';

if (isNegativeNumber(value)) {
  // value 是負數
  console.log(Math.abs(value));
}
```

### `isString`

檢查值是否為字串。

```typescript
isString(value: unknown): value is string
```

**範例：**

```typescript
import { isString } from '@chiastack/utils/is';

if (isString(value)) {
  // TypeScript 知道 value 是 string 類型
  console.log(value.toUpperCase());
}
```

### `isURL`

檢查值是否為有效的 URL 字串或 URL 實例。

```typescript
isURL(value: unknown): value is URL
```

**範例：**

```typescript
import { isURL } from '@chiastack/utils/is';

if (isURL(value)) {
  // value 是 URL 實例
  console.log(value.hostname);
}
```

### `isUrl`

檢查值是否為有效的 URL，並可選地檢查協議。

```typescript
isUrl<T, TStrict extends boolean = false>(
  url: T,
  options?: IsUrlOptions<TStrict>
): boolean
```

**參數：**
- `url`: 要檢查的值
- `options` (可選):
  - `allowedProtocols`: 允許的協議陣列，預設為 `["http", "https"]`
  - `strict`: 是否強制檢查為 URL 實例

**範例：**

```typescript
import { isUrl } from '@chiastack/utils/is';

// 基本檢查
isUrl('https://example.com'); // true
isUrl('invalid-url'); // false

// 檢查協議
isUrl('ftp://example.com', {
  allowedProtocols: ['http', 'https']
}); // false

isUrl('https://example.com', {
  allowedProtocols: ['http', 'https']
}); // true

// 嚴格模式（必須是 URL 實例）
const url = new URL('https://example.com');
isUrl(url, { strict: true }); // true
isUrl('https://example.com', { strict: true }); // false
```

### `isURLInstance`

檢查值是否為 URL 實例。

```typescript
isURLInstance(url: unknown): url is URL
```

**範例：**

```typescript
import { isURLInstance } from '@chiastack/utils/is';

const url = new URL('https://example.com');
if (isURLInstance(url)) {
  console.log(url.hostname);
}
```

### `isAbortError`

檢查錯誤是否為中止錯誤（AbortError 或 TimeoutError）。

```typescript
isAbortError(error: unknown): error is DOMException
```

**範例：**

```typescript
import { isAbortError } from '@chiastack/utils/is';

try {
  await fetch('/api/data', { signal: abortController.signal });
} catch (error) {
  if (isAbortError(error)) {
    console.log('請求被中止');
  } else {
    console.error('其他錯誤:', error);
  }
}
```

## 依賴

此模組需要 `zod` 作為 peer dependency：

```bash
npm install zod
```

## 使用場景

- 表單驗證
- API 回應驗證
- 類型安全的資料處理
- 運行時類型檢查
- 錯誤處理中的類型判斷

