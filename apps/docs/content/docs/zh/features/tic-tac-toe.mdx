---
title: TicTacToe
description: äº•å­—éŠæˆ²ç‹€æ…‹ç®¡ç†
---

`@chiastack/features/tic-tac-toe` æä¾›äº†ä¸€å€‹å®Œæ•´çš„äº•å­—éŠæˆ²ï¼ˆTic-Tac-Toeï¼‰ç‹€æ…‹ç®¡ç†è§£æ±ºæ–¹æ¡ˆï¼Œæ”¯æ´å¯è‡ªè¨‚å¤§å°çš„éŠæˆ²æ¿ã€‚

## å®‰è£

```bash
npm install @chiastack/features
```

## åŒ¯å…¥

```typescript
import {
  TicTacToeStoreProvider,
  useTicTacToeStore,
} from '@chiastack/features/tic-tac-toe/store';
```

## åŸºæœ¬ä½¿ç”¨

### 1. è¨­å®š Provider

é¦–å…ˆï¼Œåœ¨æ‡‰ç”¨ç¨‹å¼çš„æ ¹å…ƒä»¶æˆ–éœ€è¦ä½¿ç”¨çš„å€åŸŸåŒ…è£¹ `TicTacToeStoreProvider`ï¼š

```typescript
import { TicTacToeStoreProvider } from '@chiastack/features/tic-tac-toe/store';

function App() {
  return (
    <TicTacToeStoreProvider>
      <GameBoard />
    </TicTacToeStoreProvider>
  );
}
```

### 2. ä½¿ç”¨ Store

åœ¨å…ƒä»¶ä¸­ä½¿ç”¨ `useTicTacToeStore` Hook ä¾†å­˜å–å’Œæ“ä½œéŠæˆ²ç‹€æ…‹ï¼š

```typescript
import { useTicTacToeStore } from '@chiastack/features/tic-tac-toe/store';

function GameBoard() {
  const board = useTicTacToeStore((state) => state.board);
  const currentPlayer = useTicTacToeStore((state) => state.currentPlayer);
  const winner = useTicTacToeStore((state) => state.winner);
  const isDraw = useTicTacToeStore((state) => state.isDraw);
  const makeMove = useTicTacToeStore((state) => state.makeMove);
  const resetGame = useTicTacToeStore((state) => state.resetGame);

  return (
    <div>
      <div>ç•¶å‰ç©å®¶: {currentPlayer}</div>
      {winner && <div>ç²å‹è€…: {winner}</div>}
      {isDraw && <div>å¹³æ‰‹ï¼</div>}
      
      <div style={{ display: 'grid', gridTemplateColumns: `repeat(${Math.sqrt(board.length)}, 1fr)` }}>
        {board.map((cell, index) => (
          <button
            key={index}
            onClick={() => makeMove(index)}
            disabled={cell !== null || winner !== null || isDraw}
          >
            {cell || '-'}
          </button>
        ))}
      </div>
      
      <button onClick={resetGame}>é‡æ–°é–‹å§‹</button>
    </div>
  );
}
```

## API åƒè€ƒ

### TicTacToeStoreProvider

æä¾› TicTacToe Store çš„ Context Providerã€‚

#### Props

```typescript
interface TicTacToeStoreProviderProps {
  children: React.ReactNode;
  initialState?: Partial<InitialState>;
}
```

- `children`: React å­å…ƒä»¶
- `initialState`: å¯é¸çš„åˆå§‹ç‹€æ…‹ï¼Œç”¨æ–¼è¦†è“‹é è¨­å€¼

#### ç¯„ä¾‹

```typescript
<TicTacToeStoreProvider initialState={{ size: 4 }}>
  <YourComponent />
</TicTacToeStoreProvider>
```

### useTicTacToeStore

ç”¨æ–¼å­˜å–å’Œæ“ä½œ TicTacToe Store çš„ Hookã€‚

#### èªæ³•

```typescript
const value = useTicTacToeStore<T>(selector, name?);
```

- `selector`: é¸æ“‡å™¨å‡½å¼ï¼Œç”¨æ–¼å¾ store ä¸­é¸å–éœ€è¦çš„è³‡æ–™
- `name`: å¯é¸çš„éŒ¯èª¤è¨Šæ¯åç¨±ï¼ˆé è¨­ç‚º "useTicTacToeStore"ï¼‰

### State

```typescript
interface InitialState {
  size: number;              // éŠæˆ²æ¿å¤§å°ï¼ˆé è¨­ç‚º 3ï¼Œè¡¨ç¤º 3x3ï¼‰
  board: Board;              // éŠæˆ²æ¿ç‹€æ…‹
  currentPlayer: Player;     // ç•¶å‰ç©å®¶ï¼ˆ'X' æˆ– 'O'ï¼‰
  winner: Player | null;     // ç²å‹è€…ï¼ˆ'X'ã€'O' æˆ– nullï¼‰
  isFull: boolean;          // éŠæˆ²æ¿æ˜¯å¦å·²æ»¿
  isDraw: boolean;          // æ˜¯å¦å¹³æ‰‹
  winPatterns: number[][];   // ç²å‹æ¨¡å¼ï¼ˆå…§éƒ¨ä½¿ç”¨ï¼‰
}

type Player = 'X' | 'O' | null;
type Board = Player[];
```

### Actions

#### makeMove

åœ¨æŒ‡å®šä½ç½®ä¸‹æ£‹ã€‚

```typescript
makeMove: (index: number) => void;
```

**åƒæ•¸ï¼š**
- `index`: æ£‹ç›¤ä½ç½®ç´¢å¼•ï¼ˆ0 åˆ° sizeÂ² - 1ï¼‰

**è¡Œç‚ºï¼š**
- å¦‚æœè©²ä½ç½®å·²æœ‰æ£‹å­ã€éŠæˆ²å·²çµæŸæˆ–å¹³æ‰‹ï¼Œå‰‡ä¸æœƒåŸ·è¡Œä»»ä½•æ“ä½œ
- ä¸‹æ£‹å¾Œæœƒè‡ªå‹•åˆ‡æ›ç©å®¶
- æœƒè‡ªå‹•æª¢æŸ¥æ˜¯å¦æœ‰ç²å‹è€…æˆ–å¹³æ‰‹

**ç¯„ä¾‹ï¼š**

```typescript
makeMove(0);  // åœ¨å·¦ä¸Šè§’ä¸‹æ£‹
```

#### resetGame

é‡ç½®éŠæˆ²åˆ°åˆå§‹ç‹€æ…‹ã€‚

```typescript
resetGame: () => void;
```

**è¡Œç‚ºï¼š**
- æ¸…ç©ºæ£‹ç›¤
- é‡ç½®ç•¶å‰ç©å®¶ç‚º 'X'
- æ¸…é™¤ç²å‹è€…å’Œå¹³æ‰‹ç‹€æ…‹
- ä¿æŒç•¶å‰çš„éŠæˆ²æ¿å¤§å°

**ç¯„ä¾‹ï¼š**

```typescript
resetGame();
```

#### changeSize

æ”¹è®ŠéŠæˆ²æ¿å¤§å°ä¸¦é‡ç½®éŠæˆ²ã€‚

```typescript
changeSize: (newSize: number) => void;
```

**åƒæ•¸ï¼š**
- `newSize`: æ–°çš„éŠæˆ²æ¿å¤§å°ï¼ˆä¾‹å¦‚ 3 è¡¨ç¤º 3x3ï¼Œ4 è¡¨ç¤º 4x4ï¼‰

**è¡Œç‚ºï¼š**
- æ”¹è®ŠéŠæˆ²æ¿å¤§å°
- é‡ç½®éŠæˆ²åˆ°åˆå§‹ç‹€æ…‹
- é‡æ–°è¨ˆç®—ç²å‹æ¨¡å¼

**ç¯„ä¾‹ï¼š**

```typescript
changeSize(4);  // æ”¹ç‚º 4x4 éŠæˆ²æ¿
```

## å®Œæ•´ç¯„ä¾‹

```typescript
import { TicTacToeStoreProvider, useTicTacToeStore } from '@chiastack/features/tic-tac-toe/store';

function App() {
  return (
    <TicTacToeStoreProvider>
      <TicTacToeGame />
    </TicTacToeStoreProvider>
  );
}

function TicTacToeGame() {
  const board = useTicTacToeStore((state) => state.board);
  const currentPlayer = useTicTacToeStore((state) => state.currentPlayer);
  const winner = useTicTacToeStore((state) => state.winner);
  const isDraw = useTicTacToeStore((state) => state.isDraw);
  const size = useTicTacToeStore((state) => state.size);
  const makeMove = useTicTacToeStore((state) => state.makeMove);
  const resetGame = useTicTacToeStore((state) => state.resetGame);
  const changeSize = useTicTacToeStore((state) => state.changeSize);

  const gameOver = winner !== null || isDraw;
  const canMakeMove = !gameOver;

  return (
    <div>
      <h1>äº•å­—éŠæˆ²</h1>
      
      <div>
        <label>
          éŠæˆ²æ¿å¤§å°:
          <select
            value={size}
            onChange={(e) => changeSize(Number(e.target.value))}
            disabled={!gameOver}
          >
            <option value={3}>3x3</option>
            <option value={4}>4x4</option>
            <option value={5}>5x5</option>
          </select>
        </label>
      </div>

      <div>
        {gameOver ? (
          winner ? (
            <div>ğŸ‰ ç©å®¶ {winner} ç²å‹ï¼</div>
          ) : (
            <div>ğŸ¤ å¹³æ‰‹ï¼</div>
          )
        ) : (
          <div>ç•¶å‰ç©å®¶: {currentPlayer}</div>
        )}
      </div>

      <div
        style={{
          display: 'grid',
          gridTemplateColumns: `repeat(${size}, 80px)`,
          gap: '4px',
          margin: '20px 0',
        }}
      >
        {board.map((cell, index) => (
          <button
            key={index}
            onClick={() => makeMove(index)}
            disabled={!canMakeMove || cell !== null}
            style={{
              width: '80px',
              height: '80px',
              fontSize: '24px',
              cursor: canMakeMove && cell === null ? 'pointer' : 'not-allowed',
            }}
          >
            {cell || ''}
          </button>
        ))}
      </div>

      {gameOver && (
        <button onClick={resetGame}>é‡æ–°é–‹å§‹</button>
      )}
    </div>
  );
}
```

## éŠæˆ²è¦å‰‡

- éŠæˆ²ç”±å…©å€‹ç©å®¶è¼ªæµä¸‹æ£‹ï¼Œç©å®¶ 'X' å…ˆæ‰‹
- ç©å®¶è¼ªæµåœ¨ç©ºä½ä¸Šæ”¾ç½®è‡ªå·±çš„æ¨™è¨˜ï¼ˆX æˆ– Oï¼‰
- ç•¶æœ‰ç©å®¶åœ¨æ©«ã€ç›´æˆ–æ–œç·šä¸Šé€£æˆä¸€ç·šæ™‚ç²å‹
- ç•¶æ£‹ç›¤å¡«æ»¿ä¸”ç„¡äººç²å‹æ™‚ç‚ºå¹³æ‰‹
- æ”¯æ´è‡ªè¨‚å¤§å°çš„éŠæˆ²æ¿ï¼ˆ3x3ã€4x4ã€5x5 ç­‰ï¼‰

## æ³¨æ„äº‹é …

- `useTicTacToeStore` å¿…é ˆåœ¨ `TicTacToeStoreProvider` å…§éƒ¨ä½¿ç”¨ï¼Œå¦å‰‡æœƒæ‹‹å‡ºéŒ¯èª¤
- Store ä½¿ç”¨ Zustand çš„ DevTools æ•´åˆï¼Œå¯ä»¥åœ¨é–‹ç™¼æ™‚ä½¿ç”¨ Redux DevTools é€²è¡Œé™¤éŒ¯
- éŠæˆ²æ¿å¤§å°æ”¹è®Šæ™‚æœƒè‡ªå‹•é‡ç½®éŠæˆ²
- ç²å‹æ¨¡å¼æœƒæ ¹æ“šéŠæˆ²æ¿å¤§å°è‡ªå‹•è¨ˆç®—

